---
title: "データベースのコネクションプーリングについて調べたのでまとめる" # 記事のタイトル
emoji: "😇" # アイキャッチとして使われる絵文字（1 文字だけ）
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["database", "db", "RDBMS", "データベース", "コネクションプーリング"]
published: false # 公開設定（false にすると下書き）
# published_at: "1970-01-01 00:00" # 公開日
---

コネクションプーリングをなんとなくの理解で使っているのを止めようと思い色々調べてみました。そしたら思いの外楽しかったので、知識定着も兼ねてまとめてみました。

## 想定読者

以下のどれかに当てはまる方は読んで損はないと思います。

- Web の 3 層アーキテクチャと聞いて分かる人（分からなくても例えば[この記事](https://www.softbank.jp/biz/blog/cloud-technology/articles/202206/web-3-tier-architecture/)見てなんとなく理解できる人！）
- コネクションプーリング（コネクションプール）って聞いたことあるけどよくわからんという人
- コネクションプーリング（コネクションプール）の概念はなんとなく分かるけどなんとなく使っている人

玄人の方はやさしくマサカリを投げてください。

## 本記事の構成

本記事では、「コネクションプーリング」について解説していきます。

まずは「コネクションプーリング」がシステム開発を行う上でどういう立ち位置の概念なのか、その全体像を整理します。その中に現れる登場人物を整理し、「コネクションプーリング」の立ち位置、役割を理解します。

コネクションプーリングという概念を理解したら、実際にコネクションプーリングがどのように実現されているのか、その実装を見ていきます。今回はコネクションプーリングについて調べている最中に出会った JavaScript、Go、Rust での実装をいくつか眺めてみました。

最後にコネクションプーリングについて、筆者が気になったトピックをいくつか抽出しています。特にサーバーレス環境でのコネクションプーリングについて

## コネクションプーリングとは

### 全体像の理解

- RDBMS
-

### コネクションプーリングとは

## コネクションプーリングの実装を眺める

基本的には各種プログラミング言語では組み込み、もしくは 3rd-party のパッケージで各種 DBMS に対するコネクションプーリングが実装されています。コネクションプーリングがどのように実現されているのか、その

### sql.DB

- Go の sql.DB がコネクションプールを管理する仕組み

https://please-sleep.cou929.nu/go-sql-db-connection-pool.html

## コネクションプールにまつわる話題

### サーバーレス環境とコネクションプーリング

サーバーレス環境、特に FaaS を使用する場合において、常時起動しているサーバがないので、一般的な 3 層構造で置かれているサーバーサイドアプリケーションのようにコネクションプールを管理する人がいなくなります。

このような環境ではどのようにコネクションプーリングを実現するのでしょうか？

#### AWS Lambda と Amazon RDS の併用によるコネクションプーリング

現在は解決済みですが、かつて AWS Lambda から

https://www.keisuke69.net/entry/2017/06/21/121501

https://twitter.com/publickey/status/1278352737160159232?s=20

#### エッジ環境とコネクションプーリング

エッジ環境も行ってしまえばサーバーレス環境なのですが、

- (2023/01, Zenn) Vercel から MySQL/PostgreSQL に接続したい場合にどういうアーキテクチャにするのが最適か

https://zenn.dev/laiso/scraps/595d631fe19ef5

- (2023/05, Zenn) Vercel Postgres がどうやって Edge Runtime で ORM とコネクションプールを使えるようにしているのか

https://zenn.dev/laiso/articles/542fdfac2acb6b

#### 結論

### コネクションプールは必要？不必要？

ここまで色々まとめてきたコネクションプールですが、そもそもいらないのではという論もあるみたいです。

- (2013/09, togetter) RDBMS でコネクションプールが必要な理由、わからない。

https://togetter.com/li/558788

#### いらないと言われている理由

#### 結論

### NoSQL におけるコネクションプーリング：MongoDB の例

https://www.mongodb.com/docs/manual/administration/connection-pool-overview/

## 終わりに

以上、データベースのコネクションプーリングについてまとめてみました。読者の皆様の理解に少しでも寄与できれば幸いです。

余談として、筆者がデータベースに対する接続数とかコネクションプーリングという概念を初めて知ったのは、AWS Lambda + Amazon RDS の構成でなんかしようとして調べて「それはアンチパターンだ」って言及を発見したときです（多分 2019 年あたり？）。当時、先に言及した ↓ の記事を見た気がするのですが、そのときは OS やらネットワーク等のコンピュータに関する基礎知識がないよちよち歩き状態だったので、ほぼ理解できてなかったと思います。

https://www.keisuke69.net/entry/2017/06/21/121501

当時に比べてコンピュータに関する知識が少し増え、かつて理解できなかった概念が理解できるようになったのは感慨深いものがあります。コネクションプーリング含め、システムのパフォーマンスに関する領域は知識・経験が必要で難しいことが多いですが、少しずつ自分が手を出せる領域を広げていけたらと思います。

最後まで読んでくださりありがとうございました。

## 参考資料

本記事で紹介した資料、その他参考にした資料をまとめておきます。

### 本記事で紹介した資料

### その他の参考資料
