---
title: "育てる Spacemacs チートシート" # 記事のタイトル
emoji: "✏️" # アイキャッチとして使われる絵文字（1 文字だけ）
type: "tech"
topics: ["spacemacs", "vim", "emacs", "cheatsheet"]
published: false # 公開設定（false にすると下書き）
---

Common Lisp を書きたくて Spacemacs を使い始めた．

普段使いは Visual Studio Code + オレオレキーバインド（Emacs 拡張 + オレオレキーバインド）であり，かつ，Vim や Emacs をあまり使ったことがないので慣れるまでもう少しかかりそうである．

本記事では，「育てる Spacemacs チートシート」と題して，Spacemacs を使っていく過程で覚えたコマンドをまとめていく．自分が使っていない / 慣れていないキーバインドは書かず，意識せずに使えるようになったキーバインドだけ書いていく．

ちなみに，このチートシート自体も Spacemacs で書いている．

https://www.spacemacs.org/

https://github.com/syl20bnr/spacemacs/blob/master/doc/DOCUMENTATION.org

## 緊急脱出

間違ったコマンドなどを押してしまって引き返せなくなった時，C-g を連打すれば緊急脱出できる．

## Spacemacs の操作

###

## モード一覧

| モード | 機能 |
|:--|:--|
| ノーマルモード  | カーソル移動，ヤンク（コピー），プット（ペースト），削除など  |
| 入力モード or インサートモード  | カーソル移動，ヤンク（コピー），プット（ペースト），削除など  |
| ビジュアルモード | 範囲選択，選択範囲のヤンク，削除など |

## モード切り替え

| キーバインド  | 説明  |
|:--|:--|
| i   | normal -> insert  |
| ESC / （素早く）f-d   | insert -> normal  |
| v | normal -> visual |

## モードごとにできること

各モードことに出来ることをまとめた．

### ノーマルモード

ノーマルモードでは，ソースコード内をカーソルで移動し，文字列，行のヤンク & プット（コピー & ペースト），削除を行う．

基本的には，カーソルの移動とそのカーソルの現在位置で行う操作（ヤンク，プット，削除）の組み合わせによって，文字の入力以外のソースコードの編集操作を行う．

#### ウィンドウ操作系のキーバインド

| キーバインド | 説明                                                 |
|:-------------|:-----------------------------------------------------|
| SPC w 0..9   | ウィンドウを番号を指定して移動（0 はファイルツリーのウィンドウ）   |
| SPC w d      | 現在操作中のウィンドウを消去                         |
| SPC w [/]/{/}| ウィンドウのサイズを調整する（**大事**） |
| SPC w        | （TODO）ウィンドウを移動する系  |

#### ファイル操作系のキーバインド

ソースコードの編集以前に，それらを開く，保存するキーバインドを先にまとめておく．

ファイルの mnemonic として `f` が定義されている．

| キーバインド | 説明                                                 |
|:-------------|:-----------------------------------------------------|
| SPC f t      | サイドバーにファイルツリーを表示 / 非表示（neotree） |
| SPC f f      | ファイルを検索して開く                               |
| SPC f r      | 最近開いたファイルから開く                           |
| SPC f R      | カレントファイルの名前を変更（Rename）               |
| SPC f s      | ファイルを保存する                             |
| SPC f S      | 開いているファイル全てを保存する                             |
| SPC f e d    | .spacemacs を開く |
| SPC f e R    | .spacemacs をリロードする（設定を現在のエディタに反映させる） |
| SPC f |  |

##### ファイルツリー（neotree）ウィンドウにおけるキーバインド

`SPC 0` などを実行してファイルツリー上のノードにカーソルがあるときに実行するキーバインド

| キーバインド | 説明                                                 |
|:-------------|:-----------------------------------------------------|
| o r          | 最も最近アクティブだったウィンドウで現在のノード（ディレクトリ or ファイル）を開く  |
| o a a        | ウィンドウを選択して現在のノードを開く．2 回目の a を入力した時点で各ウィンドウの左上にアルファベットが表示され，そのアルファベットを入力するとそのウィンドウでノードが開く．     |
| o a h        | ウィンドウを選択して現在のノードを horizontal split で開く．選択方法は `o a a` と同じ． |
| o a v        | ウィンドウを選択して現在のノードを vertical split で開く．選択方法は `o a a` と同じ． |

#### バッファ操作系のキーバインド

| キーバインド | 説明                                                 |
|:-------------|:-----------------------------------------------------|
| SPC b b      | バッファ一覧を表示し，選択し，現在のウィンドウで開く |
| SPC b d      | 現在操作中のバッファーを kill する                   |


#### カーソル移動系のキーバインド

- 上下左右

```txt
    ↑
    k
← h   l →
    j
    ↓
```

- その他のカーソル移動

| キーバインド  | 説明  |
|:--|:--|
| ^ | 行頭へ移動（正規表現の `^` と `$` に対応していると覚えれば OK） |
| $ | 行末へ移動 |
| C-b | 1 画面分戻る |
| C-f | 1 画面分進む |
| C-u | 半画面分戻る |
| C-d | 半画面分進む |
| H   | 画面の最上部へ移動（Head．エディタの表示領域は変わらない．）  |
| M   | 画面の真ん中へ移動（Middle．エディタの表示領域は変わらない．）  |
| L   | 画面の最下部へ移動（Last．エディタの表示領域は変わらない．）  |
| g g | 現在のソースコードの最初の行へジャンプ |
| G   | 現在のソースコードの最後の行へジャンプ |
| 83 G   | 83 行目へジャンプ（任意の行数へジャンプ） |

#### ファイル編集系のキーバインド

| キーバインド  | 説明 |
|:--|:--|
| y y or Y | 行ヤンク（行コピー）  |
| d d | 行カット（行削除としても使える）  |
| d $ | 現在のカーソル位置から行末までカット（行削除としても使える）  |
| p | 現在のカーソルがある行の下にプット（ペースト）  |
| P | 現在のカーソルがある行の上にプット（ペースト）  |
| u  | undo  |
| C-r  | redo  |
| g c c  | コメントアウトの toggle  |
|   |   |
|   |   |
|   |   |
|   |   |

yyp で行のコピペ，ddp で行のカット & ペーストが基本になる．

#### 検索系のキーバインド

| キーバインド  | 説明 |
|:--|:--|
| SPC s s | ファイル内 grep．検索にかかった行を選択してジャンプできる． |
| SPC ? | キーバインドの fuzzy 検索ができる        |

### ビジュアルモード
| p   |   |

ビジュアルモードでは，ビジュアルモードへモード変更した時点でのカーソル位置を起点にカーソルを動かし，ソースコードを範囲選択し，範囲選択した文字列，行に対してヤンク，削除を行う．

---

## エディタの初期設定

Spacemacs をインストールした際に初めに行った設定をまとめておく．

### エディタの表示設定

- コードの行番号を表示
  - [spacemacs行番号を表示](http://physick.hatenablog.com/entry/2018/05/27/175037)

### layer まとめ

- コメントに関する layer
  - [Evil-commentary layer](https://develop.spacemacs.org/layers/+vim/evil-commentary/README.html)

---

## 参考

### Vim 参考資料

- [Vimモード入門](https://qiita.com/gorilla0513/items/e8ccb15bfc87e7ed8d5b#fnref4)
  - ゴリラさんの記事．Vim のモードが何故あるのか，各モードごとに何が出来るかを解説している．モードの概念が理解しやすい．
- [Vim幼稚園からVim小学校へ](https://qiita.com/hachi8833/items/7beeee825c11f7437f54)
  - Vim 入門の神記事．Vim の使い方をステップアップで解説している．Vim のキーバインドの仕組み「オペレータ + モーション」を丁寧に解説しており，キーバインドの理解に役立つ．
